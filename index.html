<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starlover's Realm</title>
    <link rel="icon" href="Assets/icon.png" type="image/png">
    <link rel="stylesheet" href="Assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bona+Nova+SC&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
</head>
<body>

    <header class="banner">
        <div class="container">
            <h1>Welcome to Starlover's Realm</h1>
            <a href="catalogue/catalogue.html" class="subdomain-button">Star's creations catalogue</a>
        </div>
    </header>

    <div class="container">
        <div class="layout">
            <div class="section feed">
                <h2>Updates</h2>
                <ul id="update-info-list">
                    <li>🖊️ Loading updates...</li>
                </ul>
            </div>

            <div class="main-content section">
                <h2>About Me</h2>
                <p>Hi, I'm <strong>starlover</strong> — welcome to my little corner of the internet!</p>
                <p>I’ve created this site to share the tools and things I’ve built that have made life easier for me, and hopefully for you too. You can explore everything through the catalogue above.</p>
                <p><strong>A bit about me:</strong><br>
                I love my girlfriend deeply — she's not only my favorite person but also my favorite artist, right alongside Lana Del Rey.</p>
                <p>I’ve spent a lot of time playing games like <a href="https://www.fortnite.com" target="_blank">Fortnite</a>, though I’ve moved on from it recently. These days, I’m more into <a href="https://www.minecraft.net" target="_blank">Minecraft</a> and love the creativity it brings.</p>
            </div>

            <div class="section">
                <h2>Enquiries</h2>
                <div class="social-links">
                    <a href="https://github.com/Starlover0104" target="_blank" aria-label="GitHub">
                        <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub">
                    </a>
                    <a href="mailto:starlover@starlover.online" target="_blank" aria-label="Email">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Gmail_icon_%282020%29.svg/2560px-Gmail_icon_%282020%29.svg.png" alt="Email">
                    </a>
                </div>
            </div>
        </div>
    </div>

<script>
    const repoOwner = "starlover0104";
    const repoName = "Starlover.online";

    async function fetchCommitsWithFiles() {
        try {
            const response = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/commits`);
            const commits = await response.json();
            const list = document.getElementById('update-info-list');
            list.innerHTML = '';

            const recentCommits = commits.slice(0, 5);

            for (const commit of recentCommits) {
                const commitDetails = await fetch(commit.url).then(res => res.json());
                const date = new Date(commit.commit.author.date);
                const formattedDate = date.toLocaleString('en-GB', {
                    day: '2-digit', month: '2-digit', year: '2-digit',
                    hour: '2-digit', minute: '2-digit'
                });

                const message = commit.commit.message.split('\n')[0]; // first line of commit message
                const files = commitDetails.files.map(file => file.filename).join(', ');

                const li = document.createElement('li');
                li.style.paddingLeft = '20px'; // indent
                li.textContent = `🖊️ ${formattedDate} – ${message} (${files})`;
                list.appendChild(li);
            }
        } catch (error) {
            document.getElementById('update-info-list').innerHTML = "<li>🖊️ Unable to fetch update info.</li>";
        }
    }

    fetchCommitsWithFiles();
</script>
</body>
</html>
